<div
  class="container-fluid min-vh-100 d-flex align-items-center justify-content-center px-3"
>
  <div class="row w-100 rounded-4" style="max-width: 1300px">
    <!-- Left side (Login Form) -->
    <div class="col-md-6 bg-white p-3 p-md-5 login-box">
      <h2 class="text-center mb-4 mb-md-5 fw-bold">Login</h2>
      <!-- <div *ngIf="successMessage" class="message success-message">
        <mat-icon>check_circle</mat-icon>
        <span>{{ successMessage }}</span>
        <button type="button" class="close-btn" (click)="clearSuccess()">
          ×
        </button>
      </div> -->

      <!-- <div
        *ngIf="loginError"
        class="alert alert-danger d-flex align-items-center gap-2 justify-content-center text-center"
      >
        <span class="icon">❌</span> {{ loginError }}
      </div> -->

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <div class="form-group mb-3">
          <label class="mb-1">Email</label>
          <input
            type="text"
            formControlName="email"
            class="form-control rounded-3 shadow-sm mb-1"
            placeholder="Enter your email"
            [ngClass]="{
              'is-invalid':
                loginForm.get('email')?.invalid &&
                loginForm.get('email')?.touched
            }"
          />
          <div
            *ngIf="
              loginForm.get('email')?.invalid && loginForm.get('email')?.touched
            "
            class="text-danger"
          >
            <small *ngIf="loginForm.get('email')?.hasError('required')"
              >Email is required.</small
            >
            <small *ngIf="loginForm.get('email')?.hasError('email')"
              >Invalid email format.</small
            >
          </div>
        </div>

        <!-- Password Field -->
        <div class="form-group mb-2 position-relative">
          <label class="mb-1">Password</label>
          <div class="input-container">
            <input
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
              class="form-control rounded-3 shadow-sm mb-1"
              placeholder="Enter your password"
              [ngClass]="{
                'is-invalid':
                  loginForm.get('password')?.invalid &&
                  loginForm.get('password')?.touched
              }"
            />
            <i
              class="eye-icon"
              [ngClass]="showPassword ? 'fa fa-eye-slash' : 'fa fa-eye'"
              (click)="togglePasswordVisibility()"
            >
            </i>
            <i
              *ngIf="
                loginForm.get('password')?.invalid &&
                loginForm.get('password')?.touched
              "
              class="fa fa-exclamation-circle text-danger position-absolute"
              style="
                right: 2.5rem;
                top: 50%;
                transform: translateY(-50%);
                font-size: 1rem;
              "
            ></i>
          </div>
          <div
            *ngIf="
              loginForm.get('password')?.invalid &&
              loginForm.get('password')?.touched
            "
            class="text-danger"
          >
            <small *ngIf="loginForm.get('password')?.hasError('required')"
              >Password is required.</small
            >
          </div>

          <div
            *ngIf="
              loginForm.get('password')?.invalid &&
              loginForm.get('password')?.touched
            "
            class="text-danger"
          >
            <small *ngIf="loginForm.get('password')?.hasError('minlength')">
              Password must be at least 6 characters
            </small>
          </div>
        </div>

        <div class="my-3 text-start">
          <a
            routerLink="/forgot-password"
            class="text-decoration-underline text-secondary small"
            >Forgot your password?</a
          >
        </div>

        <div class="d-grid mb-3">
          <button class="btn btn-dark shadow rounded-4" type="submit">
            Sign In
          </button>
        </div>

        <p class="text-center mt-3 small">
          New customer?
          <a routerLink="/register" class="text-decoration-underline text-dark"
            >Sign up for an account</a
          >
        </p>
      </form>
    </div>

    <!-- right side (Image) -->
    <div
      class="col-md-6 d-none d-md-flex align-items-center justify-content-center bg-white p-3 p-md-5 order-1 order-lg-2"
    >
      <img
        src="images/LoginPhoto.png"
        alt="Login illustration"
        class="img-fluid"
      />
    </div>
  </div>
</div>
